const album =

{
  "albums": {
    "href": "https://api.spotify.com/v1/search?query=artist%3Apink+floyd&type=album&market=US&locale=en-US%2Cen%3Bq%3D0.9&offset=1&limit=8",
    "items": [
      {
        "album_type": "album",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/5Dbax7G8SWrP9xyzkOvy2F"
        },
        "href": "https://api.spotify.com/v1/albums/5Dbax7G8SWrP9xyzkOvy2F",
        "id": "5Dbax7G8SWrP9xyzkOvy2F",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b2735d48e2f56d691f9a4e4b0bdf",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e025d48e2f56d691f9a4e4b0bdf",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d000048515d48e2f56d691f9a4e4b0bdf",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "The Wall",
        "release_date": "1979-11-30",
        "release_date_precision": "day",
        "total_tracks": 26,
        "type": "album",
        "uri": "spotify:album:5Dbax7G8SWrP9xyzkOvy2F"
      },
      {
        "album_type": "album",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/3b4E89rxzZQ9zkhgKpj8N4"
        },
        "href": "https://api.spotify.com/v1/albums/3b4E89rxzZQ9zkhgKpj8N4",
        "id": "3b4E89rxzZQ9zkhgKpj8N4",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b273810168d54f85d48f07389237",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e02810168d54f85d48f07389237",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d00004851810168d54f85d48f07389237",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "Animals",
        "release_date": "1977-01-23",
        "release_date_precision": "day",
        "total_tracks": 5,
        "type": "album",
        "uri": "spotify:album:3b4E89rxzZQ9zkhgKpj8N4"
      },
      {
        "album_type": "album",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/468ZwCchVtzEbt9BHmXopb"
        },
        "href": "https://api.spotify.com/v1/albums/468ZwCchVtzEbt9BHmXopb",
        "id": "468ZwCchVtzEbt9BHmXopb",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b2739449d3adaa0f6e26af288c0d",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e029449d3adaa0f6e26af288c0d",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d000048519449d3adaa0f6e26af288c0d",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "Meddle",
        "release_date": "1971-11-11",
        "release_date_precision": "day",
        "total_tracks": 6,
        "type": "album",
        "uri": "spotify:album:468ZwCchVtzEbt9BHmXopb"
      },
      {
        "album_type": "album",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/0bCAjiUamIFqKJsekOYuRw"
        },
        "href": "https://api.spotify.com/v1/albums/0bCAjiUamIFqKJsekOYuRw",
        "id": "0bCAjiUamIFqKJsekOYuRw",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b2731a84d71391df7469c5ab8539",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e021a84d71391df7469c5ab8539",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d000048511a84d71391df7469c5ab8539",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "Wish You Were Here",
        "release_date": "1975-09-12",
        "release_date_precision": "day",
        "total_tracks": 5,
        "type": "album",
        "uri": "spotify:album:0bCAjiUamIFqKJsekOYuRw"
      },
      {
        "album_type": "album",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/5F0IQXuHfTV7SBvZVnXERl"
        },
        "href": "https://api.spotify.com/v1/albums/5F0IQXuHfTV7SBvZVnXERl",
        "id": "5F0IQXuHfTV7SBvZVnXERl",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b2738431fb4cb38f8ee96d3434c0",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e028431fb4cb38f8ee96d3434c0",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d000048518431fb4cb38f8ee96d3434c0",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "The Division Bell",
        "release_date": "1994",
        "release_date_precision": "year",
        "total_tracks": 11,
        "type": "album",
        "uri": "spotify:album:5F0IQXuHfTV7SBvZVnXERl"
      },
      {
        "album_type": "album",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/4xODvcpjOOgu4oKWL0sCte"
        },
        "href": "https://api.spotify.com/v1/albums/4xODvcpjOOgu4oKWL0sCte",
        "id": "4xODvcpjOOgu4oKWL0sCte",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b27361f734a2370207feda78d018",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e0261f734a2370207feda78d018",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d0000485161f734a2370207feda78d018",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "A Momentary Lapse of Reason",
        "release_date": "1987-09-08",
        "release_date_precision": "day",
        "total_tracks": 11,
        "type": "album",
        "uri": "spotify:album:4xODvcpjOOgu4oKWL0sCte"
      },
      {
        "album_type": "compilation",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/53eu9AgHyg3eQNUiePWRHD"
        },
        "href": "https://api.spotify.com/v1/albums/53eu9AgHyg3eQNUiePWRHD",
        "id": "53eu9AgHyg3eQNUiePWRHD",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b273e47ceba860237166b45a97bb",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e02e47ceba860237166b45a97bb",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d00004851e47ceba860237166b45a97bb",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "A Foot in the Door: The Best of Pink Floyd",
        "release_date": "2011",
        "release_date_precision": "year",
        "total_tracks": 16,
        "type": "album",
        "uri": "spotify:album:53eu9AgHyg3eQNUiePWRHD"
      },
      {
        "album_type": "compilation",
        "artists": [
          {
            "external_urls": {
              "spotify": "https://open.spotify.com/artist/0k17h0D3J5VfsdmQ1iZtE9"
            },
            "href": "https://api.spotify.com/v1/artists/0k17h0D3J5VfsdmQ1iZtE9",
            "id": "0k17h0D3J5VfsdmQ1iZtE9",
            "name": "Pink Floyd",
            "type": "artist",
            "uri": "spotify:artist:0k17h0D3J5VfsdmQ1iZtE9"
          }
        ],
        "external_urls": {
          "spotify": "https://open.spotify.com/album/4fLDPTMutLCNWb7WoyCF86"
        },
        "href": "https://api.spotify.com/v1/albums/4fLDPTMutLCNWb7WoyCF86",
        "id": "4fLDPTMutLCNWb7WoyCF86",
        "images": [
          {
            "height": 640,
            "url": "https://i.scdn.co/image/ab67616d0000b273a7f385020b236836c3ed5d91",
            "width": 640
          },
          {
            "height": 300,
            "url": "https://i.scdn.co/image/ab67616d00001e02a7f385020b236836c3ed5d91",
            "width": 300
          },
          {
            "height": 64,
            "url": "https://i.scdn.co/image/ab67616d00004851a7f385020b236836c3ed5d91",
            "width": 64
          }
        ],
        "is_playable": true,
        "name": "Echoes: The Best of Pink Floyd",
        "release_date": "2001-11-06",
        "release_date_precision": "day",
        "total_tracks": 26,
        "type": "album",
        "uri": "spotify:album:4fLDPTMutLCNWb7WoyCF86"
      }
    ],
    "limit": 8,
    "next": "https://api.spotify.com/v1/search?query=artist%3Apink+floyd&type=album&market=US&locale=en-US%2Cen%3Bq%3D0.9&offset=9&limit=8",
    "offset": 1,
    "previous": "https://api.spotify.com/v1/search?query=artist%3Apink+floyd&type=album&market=US&locale=en-US%2Cen%3Bq%3D0.9&offset=0&limit=8",
    "total": 128
  }
}
const clientId = 'd9dcf179c9d8463a9e5b899f308babd0';
const secretId = '5579268d3346461d9fdb481abcd14ca3';
let token = undefined;

export const getToken = async () => {
  const raw = await fetch(`https://accounts.spotify.com/api/token`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams(
      { 'grant_type': 'client_credentials', 'client_id': clientId, 'client_secret': secretId }
    )
  })
  const res = await raw.json();
  console.log(res);
  token = res.access_token;
}

export const getAlbums = async (artist) => {
  const raw = await fetch(`https://api.spotify.com/v1/search?q=artist%3A${artist}&type=album&market=US&limit=8&offset=1`, {
    headers: { Authorization: 'Bearer ' + token }
  })
  const res = await raw.json();
  console.log(res);
  return res.albums.items;
}

/*

--url 'https://api.spotify.com/v1/search?q=artist%3Apink+floyd&type=album&market=US&limit=8&offset=1' \
  --header 'Authorization: Bearer 1POdFZRZbvb...qqillRxMr2z'

*/
